html

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SammyDoo - Jump & Catch!</title>
  <style>
    body {
      background: #222;
      color: #fff;
      font-family: 'Arial', sans-serif;
      text-align: center;
      margin: 0;
      overflow: hidden;
    }
    #gameContainer {
      max-width: 800px;
      margin: 0 auto;
      padding: 10px;
    }
    #gameCanvas {
      display: block;
      margin: 0 auto;
      border: 2px solid #000;
      background: #87CEEB;
      width: 100%;
      max-width: 800px;
      height: auto;
      aspect-ratio: 4 / 3;
    }
    #ui {
      display: flex;
      justify-content: space-between;
      max-width: 800px;
      margin: 10px auto;
      font-size: 20px;
    }
    #score, #timer, #highScore {
      background: rgba(0, 0, 0, 0.7);
      padding: 5px 10px;
      border-radius: 5px;
    }
    #startScreen, #gameOverScreen, #pauseScreen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }
    #gameOverScreen, #pauseScreen {
      display: none;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 18px;
      cursor: pointer;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      transition: background 0.3s;
    }
    button:hover {
      background: #45a049;
    }
    .hidden {
      display: none;
    }
    @media (max-width: 600px) {
      #ui {
        font-size: 16px;
      }
      button {
        font-size: 16px;
        padding: 8px 16px;
      }
    }
  </style>
</head>
<body>
  <div id="gameContainer">
    <h1>üê∂ SammyDoo Jump & Catch</h1>
    <canvas id="gameCanvas"></canvas>
    <div id="ui">
      <div id="score">Score: 0</div>
      <div id="timer">Time: 120s</div>
      <div id="highScore">High Score: 0</div>
    </div>
    <div id="startScreen">
      <h2>Welcome to SammyDoo!</h2>
      <p>Use Arrow Keys or Mouse to move, Space or Click to jump.</p>
      <p>Collect items while jumping to score points!</p>
      <button id="startButton">Start Game</button>
    </div>
    <div id="gameOverScreen">
      <h2>Game Over!</h2>
      <p id="finalScore">Final Score: 0</p>
      <button id="restartButton">Restart</button>
    </div>
    <div id="pauseScreen">
      <h2>Paused</h2>
      <button id="resumeButton">Resume</button>
    </div>
  </div>

  <script>
    // ===== Game Variables =====
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    let score = 0;
    let highScore = parseInt(localStorage.getItem('sammyDooHighScore')) || 0;
    let timeLeft = 120;
    let gameOver = false;
    let gameStarted = false;
    let gamePaused = false;
    let playerX = 400;
    let playerY = 0;
    let playerWidth = 80;
    let playerHeight = 80;
    let playerJumping = false;
    let jumpVelocity = 0;
    let gravity = 2400; // px/s^2
    let playerMoveSpeed = 400; // px/s
    let animTime = 0;
    let animFPS = 10; // frames per second for running animation
    let lastTime = performance.now();
    let spawnProbPerSecond = 1.8; // approximate spawns per second

    // ===== Canvas Setup =====
    function resizeCanvas() {
      const maxWidth = 800;
      const aspectRatio = 4 / 3;
      canvas.width = Math.min(window.innerWidth - 20, maxWidth);
      canvas.height = canvas.width / aspectRatio;
      playerY = canvas.height - playerHeight;
      playerX = Math.max(playerWidth / 2, Math.min(canvas.width - playerWidth / 2, playerX));
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // ===== Images =====
    const assets = {
      dogRun: ['sam_run1.png', 'sam_run2.png'], // Sprite sheet for running animation
      dogJump: 'sam_jump.png',
      background: 'park.png',
      objects: [
        { name: 'Frisbee', file: 'frisbee.png', points: 10, size: 40, speed: 200 },
        { name: 'Ball', file: 'ball.png', points: 8, size: 30, speed: 250 },
        { name: 'Stick', file: 'stick.png', points: 5, size: 50, speed: 180 },
        { name: 'Football', file: 'football.png', points: 15, size: 45, speed: 220 },
        { name: 'Chicken', file: 'chicken.png', points: 20, size: 40, speed: 280 },
        { name: 'Rope knot', file: 'rope.png', points: 12, size: 35, speed: 230 }
      ]
    };

    const images = {};
    let assetsLoaded = 0;
    const totalAssets = assets.dogRun.length + 1 + assets.objects.length + 1;

    function loadAsset(src, key) {
      const img = new Image();
      img.src = src;
      img.onload = () => {
        images[key] = img;
        assetsLoaded++;
        if (assetsLoaded === totalAssets) {
          console.log('All assets loaded');
        }
      };
      img.onerror = () => console.error(`Failed to load ${src}`);
    }

    assets.dogRun.forEach((src, i) => loadAsset(src, `dogRun${i}`));
    loadAsset(assets.dogJump, 'dogJump');
    loadAsset(assets.background, 'background');
    assets.objects.forEach(obj => loadAsset(obj.file, obj.name));

    // ===== Audio =====
    const sounds = {
      bgMusic: new Audio('bg_music.mp3'),
      collect: new Audio('collect.wav'),
      gameOver: new Audio('game_over.wav')
    };
    sounds.bgMusic.loop = true;
    sounds.bgMusic.volume = 0.3;
    sounds.collect.volume = 0.5;
    sounds.gameOver.volume = 0.5;

    let musicStarted = false;
    function startMusic() {
      if (!musicStarted && !gamePaused && !gameOver) {
        sounds.bgMusic.play().catch(() => {});
        musicStarted = true;
      }
    }
    document.addEventListener('click', startMusic);
    document.addEventListener('keydown', startMusic);

    // ===== Falling Item Class =====
    class FallingItem {
      constructor(type) {
        this.type = type;
        this.img = images[type.name];
        this.x = Math.random() * (canvas.width - type.size) + type.size / 2;
        this.y = -type.size;
        this.size = type.size;
        this.speed = type.speed + Math.random() * 50;
        this.remove = false;
      }
      update(dt) {
        this.y += this.speed * dt;
        const playerCenterY = playerY + playerHeight / 2 - 40; // Adjust based on draw offset
        if (Math.abs(this.y - playerCenterY) < (this.size / 2 + playerHeight / 2) &&
            Math.abs(this.x - playerX) < (this.size / 2 + playerWidth / 2)) {
          score += this.type.points;
          sounds.collect.play().catch(() => {});
          this.remove = true;
        }
        if (this.y > canvas.height + this.size) this.remove = true;
      }
      draw() {
        if (this.img) {
          ctx.drawImage(this.img, this.x - this.size / 2, this.y - this.size / 2, this.size, this.size);
        }
      }
    }

    let fallingItems = [];

    // ===== Spawning Items =====
    function spawnItem() {
      const type = assets.objects[Math.floor(Math.random() * assets.objects.length)];
      fallingItems.push(new FallingItem(type));
    }

    // ===== Update Game State =====
    function update(delta) {
      const dt = delta / 1000; // seconds
      if (gamePaused || !gameStarted || gameOver) return;

      // Player movement
      if (keys.ArrowLeft) playerX -= playerMoveSpeed * dt;
      if (keys.ArrowRight) playerX += playerMoveSpeed * dt;
      playerX = Math.max(playerWidth / 2, Math.min(canvas.width - playerWidth / 2, playerX));

      if (playerJumping) {
        playerY += jumpVelocity * dt;
        jumpVelocity += gravity * dt;
        if (playerY >= canvas.height - playerHeight) {
          playerY = canvas.height - playerHeight;
          playerJumping = false;
        }
      }

      // Update falling items
      fallingItems.forEach(item => item.update(dt));
      fallingItems = fallingItems.filter(item => !item.remove);

      // Spawn new items
      if (Math.random() < spawnProbPerSecond * dt && fallingItems.length < 6) {
        spawnItem();
      }

      // Update animation time
      animTime += dt;
    }

    // ===== Draw Game =====
    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Background
      if (images.background) {
        ctx.drawImage(images.background, 0, 0, canvas.width, canvas.height);
      }

      // Player
      const runFrame = Math.floor(animTime * animFPS) % assets.dogRun.length;
      if (playerJumping && images.dogJump) {
        ctx.drawImage(images.dogJump, playerX - playerWidth / 2, playerY, playerWidth, playerHeight);
      } else if (images[`dogRun${runFrame}`]) {
        ctx.drawImage(images[`dogRun${runFrame}`], playerX - playerWidth / 2, playerY, playerWidth, playerHeight);
      }

      // Falling items
      fallingItems.forEach(item => item.draw());

      // Update UI
      document.getElementById('score').textContent = `Score: ${score}`;
      document.getElementById('timer').textContent = `Time: ${timeLeft}s`;
      document.getElementById('highScore').textContent = `High Score: ${highScore}`;
    }

    // ===== Game Loop =====
    function gameLoop(timestamp) {
      if (gameOver) return;

      if (!gameStarted || gamePaused) {
        requestAnimationFrame(gameLoop);
        return;
      }

      const delta = timestamp - lastTime;
      lastTime = timestamp;

      update(delta);
      draw();

      requestAnimationFrame(gameLoop);
    }

    // ===== Timer =====
    let timerInterval;
    function startTimer() {
      timerInterval = setInterval(() => {
        if (gamePaused || !gameStarted) return;
        if (timeLeft > 0) {
          timeLeft--;
        } else {
          clearInterval(timerInterval);
          gameOver = true;
          if (score > highScore) {
            highScore = score;
            localStorage.setItem('sammyDooHighScore', highScore);
          }
          document.getElementById('gameOverScreen').style.display = 'flex';
          document.getElementById('finalScore').textContent = `Final Score: ${score}`;
          sounds.bgMusic.pause();
          sounds.gameOver.play().catch(() => {});
        }
      }, 1000);
    }

    // ===== Controls =====
    let keys = { ArrowLeft: false, ArrowRight: false };
    document.addEventListener('keydown', e => {
      if (e.key === 'ArrowLeft') keys.ArrowLeft = true;
      if (e.key === 'ArrowRight') keys.ArrowRight = true;
      if (e.key === ' ' && !playerJumping && gameStarted && !gamePaused) {
        playerJumping = true;
        jumpVelocity = -1200; // px/s (adjusted for delta time)
      }
      if (e.key.toLowerCase() === 'p' && gameStarted && !gameOver) {
        togglePause();
      }
    });
    document.addEventListener('keyup', e => {
      if (e.key === 'ArrowLeft') keys.ArrowLeft = false;
      if (e.key === 'ArrowRight') keys.ArrowRight = false;
    });

    // Mouse controls
    canvas.addEventListener('mousemove', e => {
      if (!gameStarted || gamePaused) return;
      const rect = canvas.getBoundingClientRect();
      playerX = e.clientX - rect.left;
      playerX = Math.max(playerWidth / 2, Math.min(canvas.width - playerWidth / 2, playerX));
    });
    canvas.addEventListener('mousedown', () => {
      if (!gameStarted || gamePaused || playerJumping) return;
      playerJumping = true;
      jumpVelocity = -1200;
    });

    // Touch controls
    canvas.addEventListener('touchstart', e => {
      e.preventDefault();
      if (!gameStarted || gamePaused || playerJumping) return;
      playerJumping = true;
      jumpVelocity = -1200;
    });
    canvas.addEventListener('touchmove', e => {
      e.preventDefault();
      if (!gameStarted || gamePaused) return;
      const rect = canvas.getBoundingClientRect();
      playerX = e.touches[0].clientX - rect.left;
      playerX = Math.max(playerWidth / 2, Math.min(canvas.width - playerWidth / 2, playerX));
    });

    // ===== Start/Restart/Pause =====
    function startGame() {
      if (assetsLoaded < totalAssets) {
        alert('Assets are still loading. Please wait a moment and try again.');
        return;
      }
      document.getElementById('startScreen').classList.add('hidden');
      gameStarted = true;
      gameOver = false;
      gamePaused = false;
      score = 0;
      timeLeft = 120;
      fallingItems = [];
      playerX = canvas.width / 2;
      playerY = canvas.height - playerHeight;
      playerJumping = false;
      jumpVelocity = 0;
      animTime = 0;
      startTimer();
      startMusic();
    }

    function togglePause() {
      if (!gameStarted || gameOver) return;
      gamePaused = !gamePaused;
      const pauseScreen = document.getElementById('pauseScreen');
      pauseScreen.style.display = gamePaused ? 'flex' : 'none';
      if (gamePaused) {
        sounds.bgMusic.pause();
      } else {
        startMusic();
      }
    }

    document.getElementById('startButton').addEventListener('click', startGame);
    document.getElementById('restartButton').addEventListener('click', () => {
      document.getElementById('gameOverScreen').style.display = 'none';
      sounds.bgMusic.currentTime = 0;
      clearInterval(timerInterval);
      startGame();
    });
    document.getElementById('resumeButton').addEventListener('click', togglePause);

    // ===== Initialize =====
    document.getElementById('highScore').textContent = `High Score: ${highScore}`;
    requestAnimationFrame(gameLoop);
  </script>
</body>
</html>

